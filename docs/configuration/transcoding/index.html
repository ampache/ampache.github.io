<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-docs/configuration/transcoding/transcoding" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Transcoding | Ampache</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ampache.org/docs/configuration/transcoding/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Transcoding | Ampache"><meta data-rh="true" name="description" content="Transcoding"><meta data-rh="true" property="og:description" content="Transcoding"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ampache.org/docs/configuration/transcoding/"><link data-rh="true" rel="alternate" href="https://ampache.org/docs/configuration/transcoding/" hreflang="en"><link data-rh="true" rel="alternate" href="https://ampache.org/docs/configuration/transcoding/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Wiki","item":"https://ampache.org/docs/"},{"@type":"ListItem","position":2,"name":"Configuration","item":"https://ampache.org/docs/configuration/"},{"@type":"ListItem","position":3,"name":"Transcoding","item":"https://ampache.org/docs/configuration/transcoding/"}]}</script><link rel="stylesheet" href="/assets/css/styles.a3bc6f37.css">
<script src="/assets/js/runtime~main.832e2711.js" defer="defer"></script>
<script src="/assets/js/main.8dea3793.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo/ampache-logo.png" alt="Ampache Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo/ampache-logo.png" alt="Ampache Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ampache</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/demo">Demo</a><a class="navbar__item navbar__link" href="/donate">Donate</a><a class="navbar__item navbar__link" href="/docker">Docker</a><a class="navbar__item navbar__link" href="/download">Download</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Wiki</a><a class="navbar__item navbar__link" href="/api">API</a><a class="navbar__item navbar__link navbar-links" href="/links">Links</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Ampache" class="linkLabel_WmDU">Ampache</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/demo"><span title="Demo" class="linkLabel_WmDU">Demo</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/donate"><span title="Donate" class="linkLabel_WmDU">Donate</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docker"><span title="Docker" class="linkLabel_WmDU">Docker</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/download"><span title="Download" class="linkLabel_WmDU">Download</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/"><span title="Wiki" class="categoryLinkLabel_W154">Wiki</span></a><button aria-label="Collapse sidebar category &#x27;Wiki&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/information/ampache-use-cases"><span title="Ampache Use Cases" class="linkLabel_WmDU">Ampache Use Cases</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/#preview"><span title="Screenshots" class="linkLabel_WmDU">Screenshots</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/installation/"><span title="Installation" class="categoryLinkLabel_W154">Installation</span></a><button aria-label="Expand sidebar category &#x27;Installation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/configuration/"><span title="Configuration" class="categoryLinkLabel_W154">Configuration</span></a><button aria-label="Collapse sidebar category &#x27;Configuration&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/acl"><span title="Access Control Lists" class="linkLabel_WmDU">Access Control Lists</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/remote-catalogs"><span title="Remote Catalogs" class="linkLabel_WmDU">Remote Catalogs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/ldap"><span title="LDAP" class="linkLabel_WmDU">LDAP</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/api"><span title="Ampache API" class="linkLabel_WmDU">Ampache API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/subsonic"><span title="SubSonic API" class="linkLabel_WmDU">SubSonic API</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/cron"><span title="Cron" class="linkLabel_WmDU">Cron</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/configuration/localplay/"><span title="Localplay" class="categoryLinkLabel_W154">Localplay</span></a><button aria-label="Expand sidebar category &#x27;Localplay&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/docs/configuration/transcoding/"><span title="Transcoding" class="categoryLinkLabel_W154">Transcoding</span></a><button aria-label="Collapse sidebar category &#x27;Transcoding&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/transcoding/transcode-caching"><span title="Transcode Caching" class="linkLabel_WmDU">Transcode Caching</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/catalog-filters"><span title="Private Catalogs" class="linkLabel_WmDU">Private Catalogs</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/democratic"><span title="Democratic Play" class="linkLabel_WmDU">Democratic Play</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/Ampache-Icecast-and-Liquidsoap"><span title="Ampache + Icecast &amp; Liquidsoap" class="linkLabel_WmDU">Ampache + Icecast &amp; Liquidsoap</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/multi-artist"><span title="Multi Artist support" class="linkLabel_WmDU">Multi Artist support</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/broadcasts"><span title="Broadcasts" class="linkLabel_WmDU">Broadcasts</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/configuration/podcasts"><span title="Podcasts" class="linkLabel_WmDU">Podcasts</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/clients/"><span title="Clients" class="categoryLinkLabel_W154">Clients</span></a><button aria-label="Expand sidebar category &#x27;Clients&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/plugins/"><span title="Plugins" class="categoryLinkLabel_W154">Plugins</span></a><button aria-label="Expand sidebar category &#x27;Plugins&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/themes"><span title="Themes" class="linkLabel_WmDU">Themes</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/development/CONTRIBUTING"><span title="Development" class="categoryLinkLabel_W154">Development</span></a><button aria-label="Expand sidebar category &#x27;Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/help/"><span title="Help" class="categoryLinkLabel_W154">Help</span></a><button aria-label="Expand sidebar category &#x27;Help&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex="0" href="/docs/old-information/"><span title="Old Information" class="categoryLinkLabel_W154">Old Information</span></a><button aria-label="Expand sidebar category &#x27;Old Information&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/api/"><span title="API" class="categoryLinkLabel_W154">API</span></a><button aria-label="Expand sidebar category &#x27;API&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/links"><span title="Links" class="linkLabel_WmDU">Links</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/"><span>Wiki</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/configuration/"><span>Configuration</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Transcoding</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Transcoding</h1></header><h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="transcoding">Transcoding<a href="#transcoding" class="hash-link" aria-label="Direct link to Transcoding" title="Direct link to Transcoding" translate="no">​</a></h2>
<p>Transcoding allows you to convert one type of file to another. Ampache supports on the fly transcoding of all file types based on user, IP address or available bandwidth. In order to transcode Ampache takes advantage of existing binary applications such as <a href="http://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer" class="">ffmpeg</a>, <a href="http://lame.sourceforge.net/" target="_blank" rel="noopener noreferrer" class="">Lame</a> or <a href="http://mp3splt.sourceforge.net/mp3splt_page/home.php" target="_blank" rel="noopener noreferrer" class="">mp3splt</a>. In order for transcoding to work you must first install the supporting applications and ensure that they are executable by the webserver. If you have any trouble to get transcoding working you can also have a look at the <a class="" href="/docs/help/troubleshooting/faq#unable-to-get-transcoding-working">FAQ</a>.</p>
<p><strong>WARNING:</strong> Transcoding currently causes several issues documented in <a href="https://github.com/ampache/ampache/issues/1048" target="_blank" rel="noopener noreferrer" class="">#1048</a> which you should know about before enabling it. For that reason usability is quite limited with transcoding enabled.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="standard-transcoding">Standard Transcoding<a href="#standard-transcoding" class="hash-link" aria-label="Direct link to Standard Transcoding" title="Direct link to Standard Transcoding" translate="no">​</a></h2>
<p>You will need to enable and configure transcoding in the config file before it will work.</p>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">;######################################################</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; These are commands used to transcode non-streaming</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; formats to the target file type for streaming.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; This can be useful in re-encoding file types that don&#x27;t stream</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; very well, or if your player doesn&#x27;t support some file types.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; &#x27;Downsampling&#x27; will also use these commands.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; To state the bleeding obvious, any programs referenced in the downsample</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; commands must be installed, in the web server&#x27;s search path (or referenced</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; by their full path), and executable by the web server.</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Input type selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; TYPE is the extension. &#x27;allowed&#x27; certifies that transcoding works properly for</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; this input format. &#x27;required&#x27; further forbids the direct streaming of a format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; (e.g. if you store everything in FLAC, but don&#x27;t want to ever stream that.)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; transcode_TYPE         = {allowed|required|false}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; DEFAULT: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;transcode_m4a      = allowed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;transcode_flac     = required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;transcode_mp3      = allowed</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Default output format</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; DEFAULT: none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;encode_target = mp3</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Override the default output format on a per-type basis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; encode_target_TYPE = TYPE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; DEFAULT: none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;encode_target_flac = ogg</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Command configuration. Substitutions will be made as follows:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; %FILE% =&gt; filename</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; %SAMPLE% =&gt; target sample rate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; You can do fancy things like VBR, but consider whether the consequences are</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; acceptable in your environment.</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Master transcode command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; transcode_cmd should be a single command that supports multiple file types,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; such as ffmpeg or avconv. It&#x27;s still possible to make a configuration that&#x27;s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; equivalent to the old default, but if you find that necessary you should be</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; clever enough to figure out how on your own.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; DEFAULT: none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;transcode_cmd = &quot;ffmpeg -i %FILE&quot;</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Specific transcode commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; It shouldn&#x27;t be necessary in most cases, but you can override the transcode</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; command for specific source formats.  It still needs to accept the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; encoding arguments, so the easiest approach is to use your normal command as</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; a clearing-house.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; transcode_cmd_TYPE = TRANSCODE_CMD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;transcode_cmd_mid = &quot;timidity -Or -o – %FILE% | ffmpeg -i pipe:0&quot;</span><br></span></code></pre></div></div>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; encode_args_TYPE = TRANSCODE_CMD_ARGS</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;encode_args_mp3 = &quot;-vn -b:a %SAMPLE%K -c:a mp3 -f mp3 pipe:1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;encode_args_ogg = &quot;-vn -b:a %SAMPLE%K -c:a vorbis -f ogg pipe:1&quot;</span><br></span></code></pre></div></div>
<p>The arguments may need to be adjusted depending on the specific external program chosen and its age.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="network-based-transcoding">Network Based Transcoding<a href="#network-based-transcoding" class="hash-link" aria-label="Direct link to Network Based Transcoding" title="Direct link to Network Based Transcoding" translate="no">​</a></h2>
<p>You can also force transcoding based on the IP address of the user streaming. This allows you to automatically downsample and transcode music if the user is off of your local network. To enable this you first need to define a <a class="" href="/docs/configuration/acl">Local Network ACL</a> and then enable <em>downsample_remote</em> in the ampache.cfg.php</p>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">; Downsample Remote</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; If this is set to true and access control is on any users who are not</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; coming from a defined &#x27;network&#x27; ACL will be automatically downsampled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; regardless of their preferences.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">; DEFAULT: false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">;downsample_remote = &quot;false&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="transcode-anyone-outside-10x-space">Transcode Anyone outside 10.x Space<a href="#transcode-anyone-outside-10x-space" class="hash-link" aria-label="Direct link to Transcode Anyone outside 10.x Space" title="Direct link to Transcode Anyone outside 10.x Space" translate="no">​</a></h3>
<p>The below example config would cause anyone whos IP is not 10.x.x.x to have their streams transcoded according to the transcode rules in the config file</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="config-variables">Config Variables<a href="#config-variables" class="hash-link" aria-label="Direct link to Config Variables" title="Direct link to Config Variables" translate="no">​</a></h4>
<div class="language-INI language-ini codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">downsample_remote = &quot;true&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">access_control = &quot;true&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="acl-interface-access-for-clients">ACL Interface Access for Clients<a href="#acl-interface-access-for-clients" class="hash-link" aria-label="Direct link to ACL Interface Access for Clients" title="Direct link to ACL Interface Access for Clients" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:center">User</th><th style="text-align:center">Type</th><th style="text-align:center">Start Address</th><th style="text-align:center">End Address</th><th style="text-align:center">Level</th></tr></thead><tbody><tr><td style="text-align:center">All</td><td style="text-align:center">Interface</td><td style="text-align:center">0.0.0.0</td><td style="text-align:center">255.255.255.255</td><td style="text-align:center">All</td></tr></tbody></table>
<p>This first ACL will let us continue to login after we&#x27;ve enabled the Access Control in the config file, next we need to allow streaming from our clients.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="acl-streaming-access-for-clients">ACL Streaming Access for Clients<a href="#acl-streaming-access-for-clients" class="hash-link" aria-label="Direct link to ACL Streaming Access for Clients" title="Direct link to ACL Streaming Access for Clients" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:center">User</th><th style="text-align:center">Type</th><th style="text-align:center">Start Address</th><th style="text-align:center">End Address</th><th style="text-align:center">Level</th></tr></thead><tbody><tr><td style="text-align:center">All</td><td style="text-align:center">Streaming</td><td style="text-align:center">0.0.0.0</td><td style="text-align:center">255.255.255.255</td><td style="text-align:center">All</td></tr></tbody></table>
<p>Last we&#x27;ll need to define what is our local network so that Ampache knows when it needs to transcode</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="acl-local-network-definition">ACL Local Network Definition<a href="#acl-local-network-definition" class="hash-link" aria-label="Direct link to ACL Local Network Definition" title="Direct link to ACL Local Network Definition" translate="no">​</a></h4>
<table><thead><tr><th style="text-align:center">User</th><th style="text-align:center">Type</th><th style="text-align:center">Start Address</th><th style="text-align:center">End Address</th><th style="text-align:center">Level</th></tr></thead><tbody><tr><td style="text-align:center">All</td><td style="text-align:center">Network</td><td style="text-align:center">10.0.0.0</td><td style="text-align:center">10.255.255.255</td><td style="text-align:center">All</td></tr></tbody></table>
<p>This will make is so that a client connecting from 192.168.0.32 would be considered Non-Local and would be forced to use any configured transcoding. A client coming from 10.0.32.12 would be considered local and would not be transcoded. <strong>You can have as many network ACL definitions as you want.</strong></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/configuration/localplay/Sample-Config-With-ALSA-and-Raspberry-PI"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sample MPD config file</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/configuration/transcoding/transcode-caching"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transcode Caching</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#transcoding" class="table-of-contents__link toc-highlight">Transcoding</a></li><li><a href="#standard-transcoding" class="table-of-contents__link toc-highlight">Standard Transcoding</a></li><li><a href="#network-based-transcoding" class="table-of-contents__link toc-highlight">Network Based Transcoding</a><ul><li><a href="#transcode-anyone-outside-10x-space" class="table-of-contents__link toc-highlight">Transcode Anyone outside 10.x Space</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2001 - 2026 Ampache.org</div></div></div></footer></div>
</body>
</html>