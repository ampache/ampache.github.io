"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[5538],{7743(e,n,i){i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>h,frontMatter:()=>t,metadata:()=>c,toc:()=>d});const c=JSON.parse('{"id":"docs/help/troubleshooting/cli","title":"Ampache CLI","description":"Explaining the Ampache CLI","source":"@site/docs/docs/help/troubleshooting/cli.md","sourceDirName":"docs/help/troubleshooting","slug":"/docs/help/troubleshooting/cli","permalink":"/docs/help/troubleshooting/cli","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Ampache CLI","metaTitle":"Ampache CLI","description":"Explaining the Ampache CLI"},"sidebar":"api","previous":{"title":"Frequently Asked Questions","permalink":"/docs/help/troubleshooting/faq"},"next":{"title":"Use the CLI for large updates","permalink":"/docs/help/cli-update-warning"}}');var l=i(4848),a=i(8453);const t={title:"Ampache CLI",metaTitle:"Ampache CLI",description:"Explaining the Ampache CLI"},s=void 0,r={},d=[{value:"Explaining the Ampache CLI",id:"explaining-the-ampache-cli",level:2},{value:"Migrated actions",id:"migrated-actions",level:2},{value:"Command changes",id:"command-changes",level:2},{value:"New CLI actions",id:"new-cli-actions",level:2},{value:"export",id:"export",level:3},{value:"run",id:"run",level:3},{value:"run",id:"run-1",level:3}];function o(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,a.RP)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"explaining-the-ampache-cli",children:"Explaining the Ampache CLI"}),"\n",(0,l.jsxs)(n.p,{children:["The Ampache bin folder has been cleaned up into a 2 files. ",(0,l.jsx)(n.code,{children:"bin/cli"})," and ",(0,l.jsx)(n.code,{children:"bin/installer"})]}),"\n",(0,l.jsx)(n.p,{children:"Generally you should only be interested in the cli program; all the old scripts have been migrated into cli commands."}),"\n",(0,l.jsx)(n.p,{children:"-h|--help can be used to display help for commands and cli itself."}),"\n",(0,l.jsx)(n.h2,{id:"migrated-actions",children:"Migrated actions"}),"\n",(0,l.jsxs)(n.p,{children:["In general, simply updating the command should work as expected with 2 ",(0,l.jsx)(n.a,{href:"#command-changes",children:"exceptions"}),"."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["./bin/install/add_user.inc => ./bin/cli admin",":addUser"]}),"\n",(0,l.jsx)(n.li,{children:"./bin/install/install_db.inc => ./bin/installer"}),"\n",(0,l.jsxs)(n.li,{children:["./bin/install/update_db.inc => ./bin/cli admin",":updateDatabase"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/broadcast.inc => ./bin/cli run",":broadcast"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/calculate_art_size.inc => ./bin/cli run",":calculateArtSize"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/catalog_update.inc => ./bin/cli run",":updateCatalog"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/channel_run.inc => ./bin/cli run",":channel"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/clean_art_table.inc => ./bin/cli cleanup",":art"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/compute_cache.inc => ./bin/cli run",":computeCache"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/cron.inc => ./bin/cli run",":cronProcess"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/delete_disabled.inc => ./bin/cli cleanup",":songs"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/dump_album_art.inc => ./bin/cli export",":albumArt"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/fix_filenames.inc => ./bin/cli run",":convertFilenames"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/print_tags.inc => ./bin/cli print",":tags"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/sort_files.inc => ./bin/cli cleanup",":sortSongs"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/update_db.inc => ./bin/cli run",":updateDb"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/update_file.inc => ./bin/cli run",":updateCatalogFile"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/websocket_run.inc => ./bin/cli run",":websocket"]}),"\n",(0,l.jsxs)(n.li,{children:["./bin/write_playlists.inc  => ./bin/cli export",":playlist"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"command-changes",children:"Command changes"}),"\n",(0,l.jsx)(n.p,{children:"There are 2 files that have had switches change between versions."}),"\n",(0,l.jsxs)(n.p,{children:["When migrating ",(0,l.jsx)(n.code,{children:"catalog_update.inc"})," and ",(0,l.jsx)(n.code,{children:"update_file.inc"})," commands take note that if you used the shorthand switch ",(0,l.jsx)(n.code,{children:"-v"})," it has changed to ",(0,l.jsx)(n.code,{children:"-e"})]}),"\n",(0,l.jsx)(n.p,{children:"So the Ampache 4 command:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"./bin/catalog_update.inc music -cagv"})}),"\n",(0,l.jsx)(n.p,{children:"Becomes:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.code,{children:"./bin/cli run:updateCatalog music -cage"})}),"\n",(0,l.jsx)(n.h2,{id:"new-cli-actions",children:"New CLI actions"}),"\n",(0,l.jsx)(n.p,{children:"There are some new features that were never part of Ampache 4."}),"\n",(0,l.jsxs)(n.h3,{id:"export",children:["export",":databaseArt"]}),"\n",(0,l.jsxs)(n.p,{children:["If you have a large image table and would like to export your art, this command will export art to the ",(0,l.jsx)(n.code,{children:"local_metadata_dir"})," from your config."]}),"\n",(0,l.jsxs)(n.h3,{id:"run",children:["run",":cacheProcess"]}),"\n",(0,l.jsxs)(n.p,{children:["Command to start ",(0,l.jsx)(n.a,{href:"/docs/configuration/transcoding/transcode-caching",children:"Transcode Caching"}),"."]}),"\n",(0,l.jsxs)(n.h3,{id:"run-1",children:["run",":moveCatalogPath"]}),"\n",(0,l.jsx)(n.p,{children:"When you have changed mount points you can update the database locations to match this new location."})]})}function h(e={}){const{wrapper:n}={...(0,a.RP)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,n,i){i.d(n,{RP:()=>a,xA:()=>s});var c=i(6540);const l=c.createContext({});function a(e){const n=c.useContext(l);return c.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}const t={};function s({components:e,children:n,disableParentContext:i}){let s;return s=i?"function"==typeof e?e({}):e||t:a(e),c.createElement(l.Provider,{value:s},n)}}}]);