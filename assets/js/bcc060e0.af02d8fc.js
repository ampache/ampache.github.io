"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[1750],{48(e,i,n){n.r(i),n.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"docs/plugins/writing-plugins","title":"Writing Plugins","description":"Writing Ampache Plugins","source":"@site/docs/docs/plugins/writing-plugins.md","sourceDirName":"docs/plugins","slug":"/docs/plugins/writing-plugins","permalink":"/docs/plugins/writing-plugins","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Writing Plugins","metaTitle":"Writing Plugins","description":"Writing Ampache Plugins"},"sidebar":"api","previous":{"title":"Ampache Plugins","permalink":"/docs/plugins/"},"next":{"title":"Themes","permalink":"/docs/themes"}}');var s=n(4848),t=n(8453);const a={title:"Writing Plugins",metaTitle:"Writing Plugins",description:"Writing Ampache Plugins"},r=void 0,o={},d=[{value:"Writing Ampache Plugins",id:"writing-ampache-plugins",level:2},{value:"About",id:"about",level:2},{value:"Required Methods",id:"required-methods",level:2},{value:"Additional Methods",id:"additional-methods",level:2},{value:"Possible Plugin methods",id:"possible-plugin-methods",level:2}];function h(e){const i={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.RP)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"writing-ampache-plugins",children:"Writing Ampache Plugins"}),"\n",(0,s.jsx)(i.p,{children:"It can be a bit daunting to write a plugin for Ampache but this page will be written up to help people with a bit of knowledge take the plunge and write a plugin!"}),"\n",(0,s.jsx)(i.h2,{id:"about",children:"About"}),"\n",(0,s.jsx)(i.p,{children:"Plugins are called by Ampache to perform a specific function. currently there are multiple display, media notification and art searching plugins that help extend what Ampache can do."}),"\n",(0,s.jsxs)(i.p,{children:["Plugins are placed in: ",(0,s.jsx)(i.code,{children:"Ampache/modules/plugins/"})," the name of the file must be ",(0,s.jsx)(i.code,{children:"./Name/Name.plugin.php"}),".\ne.g. ",(0,s.jsx)(i.code,{children:"Dummy/Dummy.plugin.php"}),"."]}),"\n",(0,s.jsxs)(i.p,{children:["The file must declare a corresponding class and the name of the class must be prefixed with Ampache.\ne.g. ",(0,s.jsx)(i.code,{children:"class AmpacheDummy"})]}),"\n",(0,s.jsx)(i.p,{children:"Copying an existing plugin is the easiest way to write a new one."}),"\n",(0,s.jsxs)(i.p,{children:["There is an empty example template available here ",(0,s.jsx)(i.a,{href:"https://github.com/ampache/ampache/blob/develop/docs/examples/AmpacheExample.php",children:"AmpacheExample.php"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"This should let you expand and develop your own plugin quickly."}),"\n",(0,s.jsx)(i.h2,{id:"required-methods",children:"Required Methods"}),"\n",(0,s.jsx)(i.p,{children:"The following public variables must be declared:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"(string) name"}),"\n",(0,s.jsx)(i.li,{children:"(string) description"}),"\n",(0,s.jsx)(i.li,{children:"(int)    version     - This plugin's version"}),"\n",(0,s.jsx)(i.li,{children:"(string) min_ampache - Minimum Ampache DB version required"}),"\n",(0,s.jsx)(i.li,{children:"(string) max_ampache - Maximum Ampache DB version supported"}),"\n"]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-php",children:"    public $name        = 'Dummy Plugin';\n    public $description = 'Dummy Plugin to hopefully explain this a bit better';\n    public $version     = '000002';\n    public $min_ampache = '420000';\n    public $max_ampache = '999999';\n"})}),"\n",(0,s.jsx)(i.p,{children:"The following public methods must be implemented:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"install()        - This is usually used to insert preferences like API keys or other values the plugin needs"}),"\n",(0,s.jsx)(i.li,{children:"uninstall()      - Remove all the things you install here"}),"\n",(0,s.jsx)(i.li,{children:"load(User $user) - Loads the preferences you have installed to the database"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"These functions should all return a boolean on success/failure."}),"\n",(0,s.jsx)(i.h2,{id:"additional-methods",children:"Additional Methods"}),"\n",(0,s.jsx)(i.p,{children:"The following public methods may be implemented:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"upgrade() - If you make an update that requires new preferences use upgrade to insert the missing preferences without having to reinstall."}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"possible-plugin-methods",children:"Possible Plugin methods"}),"\n",(0,s.jsx)(i.p,{children:"Finally, for the plugin to actually be useful one or more of the following hooks should be implemented as a public method:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"display_home() Display something in the home page / index"}),"\n",(0,s.jsx)(i.li,{children:"display_on_footer() Same as home, except in the page footer"}),"\n",(0,s.jsx)(i.li,{children:"display_user_field(library_item $libitem = null) This display the module in user page"}),"\n",(0,s.jsx)(i.li,{children:"display_map(array $points) Used for graphs and charts"}),"\n",(0,s.jsx)(i.li,{children:"external_share(string $public_url, string $share_name) Send a shared object to an external site"}),"\n",(0,s.jsx)(i.li,{children:"gather_arts(string $type, array $options, integer $limit) Search for art externally"}),"\n",(0,s.jsx)(i.li,{children:"get_avatar_url(User $user)"}),"\n",(0,s.jsx)(i.li,{children:"get_lyrics(Song $song)"}),"\n",(0,s.jsx)(i.li,{children:"get_location_name(float $latitude float $longitude)"}),"\n",(0,s.jsx)(i.li,{children:"get_metadata(array $gather_types, array $media_info) Array of object types and array of info for that object"}),"\n",(0,s.jsx)(i.li,{children:"get_photos(string $search_name)"}),"\n",(0,s.jsx)(i.li,{children:"get_song_preview(string $track_mbid, string $artist_name, string $title)"}),"\n",(0,s.jsx)(i.li,{children:"process_wanted(Wanted $wanted)"}),"\n",(0,s.jsx)(i.li,{children:"save_mediaplay(Song $song)"}),"\n",(0,s.jsx)(i.li,{children:"save_rating(Rating $rating, integer $new_value)"}),"\n",(0,s.jsx)(i.li,{children:"set_flag(Song $song, boolean $flagged)"}),"\n",(0,s.jsx)(i.li,{children:"shortener(string $url)"}),"\n",(0,s.jsx)(i.li,{children:"stream_control(array $object_ids)"}),"\n",(0,s.jsx)(i.li,{children:"stream_song_preview(string $file)"}),"\n",(0,s.jsx)(i.li,{children:"display_home() Display someting in the home page / index"}),"\n"]})]})}function c(e={}){const{wrapper:i}={...(0,t.RP)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,i,n){n.d(i,{RP:()=>t,xA:()=>r});var l=n(6540);const s=l.createContext({});function t(e){const i=l.useContext(s);return l.useMemo(()=>"function"==typeof e?e(i):{...i,...e},[i,e])}const a={};function r({components:e,children:i,disableParentContext:n}){let r;return r=n?"function"==typeof e?e({}):e||a:t(e),l.createElement(s.Provider,{value:r},i)}}}]);