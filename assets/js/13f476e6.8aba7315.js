"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[5395],{8453(e,t,s){s.d(t,{RP:()=>r,xA:()=>c});var n=s(6540);const l=n.createContext({});function r(e){const t=n.useContext(l);return n.useMemo(()=>"function"==typeof e?e(t):{...t,...e},[t,e])}const i={};function c({components:e,children:t,disableParentContext:s}){let c;return c=s?"function"==typeof e?e({}):e||i:r(e),n.createElement(l.Provider,{value:c},t)}},9708(e,t,s){s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>o,frontMatter:()=>i,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"docs/configuration/remote-catalogs","title":"Remote Catalogs","description":"Ampache Remote Catalogs","source":"@site/docs/docs/configuration/remote-catalogs.md","sourceDirName":"docs/configuration","slug":"/docs/configuration/remote-catalogs","permalink":"/docs/configuration/remote-catalogs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Remote Catalogs","metaTitle":"Remote Catalogs","description":"Ampache Remote Catalogs"},"sidebar":"api","previous":{"title":"Upgrading","permalink":"/docs/information/upgrade"},"next":{"title":"Private Catalogs","permalink":"/docs/configuration/catalog-filters"}}');var l=s(4848),r=s(8453);const i={title:"Remote Catalogs",metaTitle:"Remote Catalogs",description:"Ampache Remote Catalogs"},c=void 0,d={},h=[{value:"Ampache Remote Catalogs",id:"ampache-remote-catalogs",level:2},{value:"First Steps",id:"first-steps",level:2},{value:"Configure the ACL&#39;s on the server side",id:"configure-the-acls-on-the-server-side",level:3},{value:"Stream Access List",id:"stream-access-list",level:3},{value:"Interface Access List",id:"interface-access-list",level:3},{value:"API-RPC Access List",id:"api-rpc-access-list",level:3},{value:"Configure the ACL&#39;s on the remote side",id:"configure-the-acls-on-the-remote-side",level:3},{value:"Stream Access List (remote)",id:"stream-access-list-remote",level:4},{value:"Interface Access List (remote)",id:"interface-access-list-remote",level:4},{value:"API-RPC Access List (remote)",id:"api-rpc-access-list-remote",level:4},{value:"Config requirements for the &quot;SERVER&quot; and &quot;REMOTE&quot;",id:"config-requirements-for-the-server-and-remote",level:2},{value:"Add The catalog to the REMOTE server",id:"add-the-catalog-to-the-remote-server",level:2},{value:"Fill in the form with the following entry&#39;s",id:"fill-in-the-form-with-the-following-entrys",level:3}];function a(e){const t={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.RP)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h2,{id:"ampache-remote-catalogs",children:"Ampache Remote Catalogs"}),"\n",(0,l.jsx)(t.p,{children:"You can remotely connect one more Ampache servers to one or more other Ampache servers. This is accomplished using API-RPC. The below documentation will walk you through configuring two Ampache installs and connecting one to the other. This functionality is disabled by default."}),"\n",(0,l.jsx)(t.h2,{id:"first-steps",children:"First Steps"}),"\n",(0,l.jsxs)(t.p,{children:["Ampache's Access Lists are by default ",(0,l.jsx)(t.em,{children:"Deny From All"})," this means if we enable ",(0,l.jsx)(t.em,{children:"access_control"})," without defining any ACL's we will be locked out of our own Ampache install. First we should create the ACL (Access Control List) on both servers."]}),"\n",(0,l.jsx)(t.h3,{id:"configure-the-acls-on-the-server-side",children:"Configure the ACL's on the server side"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Login as administrator and use the menu to browse to the access-list setup."}),"\n",(0,l.jsx)(t.li,{children:"Admin > Access List"}),"\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.strong,{children:"Add Entry"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"Fill in the form with the following entry's"}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"stream-access-list",children:"Stream Access List"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Stream Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Read"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"All"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Stream Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0.0.0.0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"255.255.255.255"})]})})]}),"\n",(0,l.jsx)(t.p,{children:"Where"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Field"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is just the name of the ACL(Access List) so you can identify it later."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is the privilege level that the user gets."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is the login name of the user."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is the ACL type."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is the start ip address of the range of ip addresses you're building the ACL for."})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"End Address"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"This is the end ip address of the range of ip addresses you're building the ACL for."})]})]})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows streaming capability from all possible ip addresses, not bound to any user."}),"\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Add Entry"})," again."]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"interface-access-list",children:"Interface Access List"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Interface Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"View"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"All"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Web Interface"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0.0.0.0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"255.255.255.255"})]})})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows interface access from all possible ip addresses, not bound to any user."}),"\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Add Entry"}),"."]}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"api-rpc-access-list",children:"API-RPC Access List"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"API-RPC %Remote Servername%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Read/Write"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"%User Account%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"API-RPC"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:'"Remote Server Ip"'}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:'"Remote Server Ip"'})]})})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows API-RPC access from one ip address and secured by a shared secret."}),"\n"]}),"\n",(0,l.jsx)(t.h3,{id:"configure-the-acls-on-the-remote-side",children:"Configure the ACL's on the remote side"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Login as administrator and use the menu to browse to the access-list setup."}),"\n",(0,l.jsx)(t.li,{children:"Admin > Access List"}),"\n",(0,l.jsx)(t.li,{children:"Click Add Entry."}),"\n",(0,l.jsx)(t.li,{children:"Fill in the form with the following entry's"}),"\n"]}),"\n",(0,l.jsx)(t.h4,{id:"stream-access-list-remote",children:"Stream Access List (remote)"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Stream Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Read"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"All"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Stream Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0.0.0.0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"255.255.255.255"})]})})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows streaming capability from all possible ip addresses, not bound to any user."}),"\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Add Entry"})," again."]}),"\n"]}),"\n",(0,l.jsx)(t.h4,{id:"interface-access-list-remote",children:"Interface Access List (remote)"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Interface Access"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"View"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"All"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Web Interface"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0.0.0.0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"255.255.255.255"})]})})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows interface access from all possible ip addresses, not bound to any user."}),"\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Add Entry"}),"."]}),"\n"]}),"\n",(0,l.jsx)(t.h4,{id:"api-rpc-access-list-remote",children:"API-RPC Access List (remote)"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Level"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"User"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"ACL Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Start Address"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"End Address"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"API-RPC %Remote Servername%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Read/Write"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"%User Account%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"API-RPC"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"0.0.0.0"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"255.255.255.255"})]})})]}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Create ACL"}),"."]}),"\n",(0,l.jsx)(t.li,{children:"What we created just now is an ACL that allows API-RPC access from one ip address and secured by a shared secret."}),"\n"]}),"\n",(0,l.jsx)(t.h2,{id:"config-requirements-for-the-server-and-remote",children:'Config requirements for the "SERVER" and "REMOTE"'}),"\n",(0,l.jsx)(t.p,{children:"Last but not least we have to enable few settings in the ampache.cfg.php file on both servers. The settings below are required when you want to use API-RPC and ampache."}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-conf",children:'; Use Access List\n; Toggle this on if you want ampache to pay attention to the access list\n; and only allow streaming/downloading/api-rpc from known hosts by default\n; api-rpc will not working without this on.\n; DEFAULT: true\naccess_control  = "true"\n'})}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-INI",children:'; Require Session\n; If this is set to true ampache will make sure that the URL passed when\n; attempting to retrieve a song contains a valid Session ID This prevents\n; others from guessing URL\'s\n; DEFAULT: true\nrequire_session = "true"\n'})}),"\n",(0,l.jsx)(t.h2,{id:"add-the-catalog-to-the-remote-server",children:"Add The catalog to the REMOTE server"}),"\n",(0,l.jsxs)(t.p,{children:["Login as administrator at the REMOTE and use the menu to browse to the catalog setup. Click Admin > Catalog then Click ",(0,l.jsx)(t.em,{children:"Add Catalog"}),"."]}),"\n",(0,l.jsx)(t.h3,{id:"fill-in-the-form-with-the-following-entrys",children:"Fill in the form with the following entry's"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Catalog Name"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Path"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Catalog Type"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Remote Catalog Username"}),(0,l.jsx)(t.th,{style:{textAlign:"center"},children:"Remote Catalog Password"})]})}),(0,l.jsx)(t.tbody,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"API-RPC %Remote Servername%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:(0,l.jsx)(t.code,{children:"http://127.0.0.2/ampache"})}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"Remote"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"%User Account%"}),(0,l.jsx)(t.td,{style:{textAlign:"center"},children:"%User Account Password%"})]})})]}),"\n",(0,l.jsx)(t.p,{children:"The rest of the option can be set as wished. They do not influence the working of the catalog."}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsxs)(t.li,{children:["Click ",(0,l.jsx)(t.em,{children:"Add Catalog"})]}),"\n"]})]})}function o(e={}){const{wrapper:t}={...(0,r.RP)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}}}]);