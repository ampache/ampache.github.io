"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[898],{3842(e,n,r){r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"docs/development/branch-layout","title":"Branch Layout","description":"Ampache Branch Layouts","source":"@site/docs/docs/development/branch-layout.md","sourceDirName":"docs/development","slug":"/docs/development/branch-layout","permalink":"/docs/development/branch-layout","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Branch Layout","metaTitle":"Branch Layout","description":"Ampache Branch Layouts"},"sidebar":"api","previous":{"title":"Translations","permalink":"/docs/development/TRANSLATIONS"},"next":{"title":"Issues","permalink":"/docs/development/issue-template"}}');var s=r(4848),t=r(8453);const l={title:"Branch Layout",metaTitle:"Branch Layout",description:"Ampache Branch Layouts"},o=void 0,i={},c=[{value:"Ampache Branch Layouts",id:"ampache-branch-layouts",level:2},{value:"develop",id:"develop",level:2},{value:"master",id:"master",level:2},{value:"edge",id:"edge",level:2},{value:"release",id:"release",level:2},{value:"patch/bugfix",id:"patchbugfix",level:2}];function h(e){const n={a:"a",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.RP)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"ampache-branch-layouts",children:"Ampache Branch Layouts"}),"\n",(0,s.jsx)(n.p,{children:"To help structure code a bit better Ampache has split repo activity into the following types"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Development: A place where the majority of Ampache development happens"}),"\n",(0,s.jsx)(n.li,{children:"Release: Once a satisfactory release is ready in a development repo it is moved to a release branch"}),"\n",(0,s.jsx)(n.li,{children:"Patch/Bugfix: Temporary branches used to conduct bugfix releases in a current release repo"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"All releases are tagged from the release repos allowing a merge from master when the release is complete. By keeping release branches separated from regular development this allows users to stay on a git release branch that will always be tested and stable."}),"\n",(0,s.jsx)(n.h2,{id:"develop",children:"develop"}),"\n",(0,s.jsx)(n.p,{children:"Ampache Development has commonly occurred inside the develop repo."}),"\n",(0,s.jsx)(n.p,{children:"Develop is still the primary repository and where all people interested in development should start when bug fixing/working on the project."}),"\n",(0,s.jsxs)(n.p,{children:["The version of the develop repo is ",(0,s.jsx)(n.strong,{children:"always"})," develop."]}),"\n",(0,s.jsx)(n.h2,{id:"master",children:"master"}),"\n",(0,s.jsx)(n.p,{children:"In the new layout, master is no longer a release branch! There is now an extended process to avoid diverging the code."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Develop is merged into master, signifying the start of a new release."}),"\n",(0,s.jsxs)(n.li,{children:["A new version based on the current develop code is assigned to the master branch 'x.x.x-develop'","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"This version remains until the release is completed and ready to move into a release branch"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Code is maintained in parallel to develop and any fixes from master should be merged back into develop"}),"\n",(0,s.jsxs)(n.li,{children:["After testing and code is stable; create a pull request merge into the correct release branch","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"e.g. version 4.4.0-develop merges into the release4 branch"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Move on to the release branch and follow the ",(0,s.jsx)(n.a,{href:"https://github.com/ampache/ampache/blob/master/docs/RELEASE-PROCESS.md",children:"release process"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Master branch version is decided based on what is committed from develop/edge and will change from 'x.x.x-develop' to 'x.x.x-release' once ready to merge into release branches."}),"\n",(0,s.jsx)(n.h2,{id:"edge",children:"edge"}),"\n",(0,s.jsx)(n.p,{children:"The edge repo is where large or breaking changes are maintained until they can be merged into develop. Anything that would cause a breakage for the current release version must go into edge until it is deemed ready."}),"\n",(0,s.jsxs)(n.p,{children:["Edge ",(0,s.jsx)(n.strong,{children:"must"})," merge with develop regularly to ensure divergence is kept at a minimum."]}),"\n",(0,s.jsxs)(n.p,{children:["The version of the edge repo is ",(0,s.jsx)(n.strong,{children:"always"})," edge."]}),"\n",(0,s.jsx)(n.h2,{id:"release",children:"release"}),"\n",(0,s.jsx)(n.p,{children:"Release branches are created for each major version number of Ampache. (e.g. release4 for Ampache 4.4.0, release5 for Ampache 5.0.0, etc)"}),"\n",(0,s.jsx)(n.p,{children:"If there is no current release branch for your version (e.g. there is no release6 branch for Ampache 6.0.0) create a new branch using the stable master branch and follow the standard release process."}),"\n",(0,s.jsx)(n.p,{children:"Make sure to only tag the release from the release branch and not master."}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"For existing release branches complete a pull request and then follow the release process."}),"\n",(0,s.jsx)(n.li,{children:"Do not rely on master branch being the same/stable version that you are working on."}),"\n",(0,s.jsx)(n.li,{children:"Fork the release branch into a patch branch and delete after the bugfix pull has merged."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The version of a release repo is ",(0,s.jsx)(n.strong,{children:"always"})," 'x.x.x-release'"]}),"\n",(0,s.jsx)(n.h2,{id:"patchbugfix",children:"patch/bugfix"}),"\n",(0,s.jsx)(n.p,{children:"These are temporary branches that are created to maintain the current releases"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Bug fixes for the branches will occur in ",(0,s.jsx)(n.strong,{children:"forked"})," release branches and will have point releases tagged from that branch. eg 4.3.1, 4.3.2"]}),"\n",(0,s.jsx)(n.li,{children:"Develop and master will continue on the next milestone"}),"\n",(0,s.jsx)(n.li,{children:"The version of maintenance branches will be incremented based on the current version being maintained (e.g. 'x.x.x-develop')"}),"\n",(0,s.jsx)(n.li,{children:"Patch branches will be deleted after being merged into a new release"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Like master the version will change from 'x.x.x-develop' to 'x.x.x-release' once ready to merge into release branches."})]})}function d(e={}){const{wrapper:n}={...(0,t.RP)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453(e,n,r){r.d(n,{RP:()=>t,xA:()=>o});var a=r(6540);const s=a.createContext({});function t(e){const n=a.useContext(s);return a.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}const l={};function o({components:e,children:n,disableParentContext:r}){let o;return o=r?"function"==typeof e?e({}):e||l:t(e),a.createElement(s.Provider,{value:o},n)}}}]);