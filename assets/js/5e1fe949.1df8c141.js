"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[1583],{5439(e,n,a){a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"docs/configuration/localplay/mpd","title":"MPD","description":"Ampache MPD","source":"@site/docs/docs/configuration/localplay/mpd.md","sourceDirName":"docs/configuration/localplay","slug":"/docs/configuration/localplay/mpd","permalink":"/docs/configuration/localplay/mpd","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"MPD","metaTitle":"MPD","description":"Ampache MPD"},"sidebar":"api","previous":{"title":"Localplay","permalink":"/docs/configuration/localplay/"},"next":{"title":"XMBC/Kodi Plugin","permalink":"/docs/configuration/localplay/kodi"}}');var o=a(4848),i=a(8453);const s={title:"MPD",metaTitle:"MPD",description:"Ampache MPD"},l=void 0,c={},r=[{value:"Configuring MPD for Localplay",id:"configuring-mpd-for-localplay",level:2},{value:"Activate MPD module",id:"activate-mpd-module",level:2},{value:"Adding a localplay instance",id:"adding-a-localplay-instance",level:2},{value:"Creating the localplay instance",id:"creating-the-localplay-instance",level:3},{value:"Selecting the instance",id:"selecting-the-instance",level:3},{value:"Tips &amp; Tricks",id:"tips--tricks",level:3},{value:"Sample settings in mpd.conf",id:"sample-settings-in-mpdconf",level:3},{value:"Ampache and Mopidy",id:"ampache-and-mopidy",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.RP)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"configuring-mpd-for-localplay",children:"Configuring MPD for Localplay"}),"\n",(0,o.jsxs)(n.p,{children:["Ampache has the ability to remote control an MPD instance over the network. MPD or ",(0,o.jsx)(n.a,{href:"http://musicpd.org",children:"Music Player Daemon"})," is designed for integrating a computer into a stereo system that provides control for music playback over a local network. this document will walk you through the steps on how to setup localplay with MPD. It is assumed that you have ",(0,o.jsx)(n.em,{children:"Admin"})," rights on your Ampache instance."]}),"\n",(0,o.jsx)(n.h2,{id:"activate-mpd-module",children:"Activate MPD module"}),"\n",(0,o.jsxs)(n.p,{children:["In all new installs of Ampache the MPD module is, by default, enabled. To verify that it is currently enabled click on ",(0,o.jsx)(n.em,{children:"Modules"})," and then look under ",(0,o.jsx)(n.em,{children:"Localplay Modules"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["When you activate the MPD module Ampache automatically enables Localplay globally, sets your play type to ",(0,o.jsx)(n.em,{children:"Localplay"}),", sets your ",(0,o.jsx)(n.a,{href:"/docs/configuration/localplay#localplay-permission-levels",children:"Localplay Access"})," to ",(0,o.jsx)(n.em,{children:"Admin"})," and sets your Localplay type to ",(0,o.jsx)(n.em,{children:"MPD"}),". You must do the same for any other user you would like to be able to use MPD."]}),"\n",(0,o.jsx)(n.h2,{id:"adding-a-localplay-instance",children:"Adding a localplay instance"}),"\n",(0,o.jsx)(n.p,{children:"Once you have that setup you will need to add an Instance of MPD. Ampache works on the principle of distinct Localplay Instances which each have their own settings, an owner and an access level. This allows a single user to control a very large number of MPD instances with a click of a button."}),"\n",(0,o.jsx)(n.h3,{id:"creating-the-localplay-instance",children:"Creating the localplay instance"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.code,{children:"Localplay --\x3e Add instance"})}),"\n",(0,o.jsx)(n.p,{children:"You will be given several options when creating an instance, such as instance name, hostname, password and port. Name is how Ampache will represent the instance on the sidebar. The Hostname is the IP or DNS name of your MPD instance. If MPD is non-local make sure that it is listening on the correct IP. Password is the password in mpd.conf you set for your MPD instance, leave blank if you did not set a password. Port is by default 6600 only change if you have modified your mpd.conf."}),"\n",(0,o.jsx)(n.h3,{id:"selecting-the-instance",children:"Selecting the instance"}),"\n",(0,o.jsxs)(n.p,{children:["Once you created an instance you the name of the instance should show up under ",(0,o.jsx)(n.em,{children:"Active instance"}),". All that you have to do to start using it is click on its name. It should turn blue to indicate that the change was successful. At any time you can switch back to Streaming by clicking ",(0,o.jsx)(n.em,{children:"None"})," or start managing a different MPD instance by clicking on its name."]}),"\n",(0,o.jsx)(n.h3,{id:"tips--tricks",children:"Tips & Tricks"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Ampache can't connect to MPD but I'm sure I've got the host set correctly"}),": If MPD is not on the same box as your ampache instance you need to make sure that MPD is not listening on localhost, instead it will need to listen on all addresses so that it can accept the stream from Ampache."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"I can add songs but I can't stop or start MPD"}),": Most likely your ",(0,o.jsx)(n.a,{href:"/docs/configuration/localplay#localplay-permission-levels",children:"Localplay Access"})," is set to user, change it to Manager or Admin."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"MPD localplay stops for no apparent reason"})," : It's MPD's config dropping connections. Switching to a Physical address instead of allowing MPD to use local host solve most of it. Example of a part of a config file:"]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:'   audio_output {\n         type                    "alsa"\n         name                    "My ALSA Device"\n         device                  "hw:0,0"     # optional\n #        format                  "44100:16:2" # optional\n #        mixer_control                   "Master"\n         use_mmap                                "yes"\n         auto_resample                   "yes"\n'})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"/docs/configuration/localplay/Sample-MPD-Config-For-Ampache",children:"Here a more complete example"})}),"\n",(0,o.jsx)(n.h3,{id:"sample-settings-in-mpdconf",children:"Sample settings in mpd.conf"}),"\n",(0,o.jsx)(n.p,{children:"These settings affect your MPD localplay instance. If you have large playlists then the max settings need to be adjusted."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-conf",children:'    bind_to_address                 "any"\n    port                            "6600"\n    password                        "yourpassword@read,add,control,admin"\n    max_playlist_length             "65535"\n    max_command_list_size           "65535"\n'})}),"\n",(0,o.jsx)(n.h2,{id:"ampache-and-mopidy",children:"Ampache and Mopidy"}),"\n",(0,o.jsxs)(n.p,{children:["If you're using ",(0,o.jsx)(n.a,{href:"http://www.mopidy.com",children:"Mopidy"})," then you should be aware that it is also possible to browse and play your Ampache library from Mopidy web interface using Subsonic API on Ampache and the ",(0,o.jsx)(n.a,{href:"https://github.com/rattboi/mopidy-subsonic",children:"Mopidy-Subsonic"})," backend extension."]})]})}function h(e={}){const{wrapper:n}={...(0,i.RP)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,a){a.d(n,{RP:()=>i,xA:()=>l});var t=a(6540);const o=t.createContext({});function i(e){const n=t.useContext(o);return t.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}const s={};function l({components:e,children:n,disableParentContext:a}){let l;return l=a?"function"==typeof e?e({}):e||s:i(e),t.createElement(o.Provider,{value:l},n)}}}]);