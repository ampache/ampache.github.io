"use strict";(globalThis.webpackChunkampache_org_docs=globalThis.webpackChunkampache_org_docs||[]).push([[8458],{1577(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>t});const a=JSON.parse('{"id":"docker","title":"Docker","description":"Run Ampache with docker","source":"@site/docs/docker.md","sourceDirName":".","slug":"/docker","permalink":"/docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Docker","metaTitle":"Docker","description":"Run Ampache with docker"},"sidebar":"api","previous":{"title":"Donate","permalink":"/donate"},"next":{"title":"Download","permalink":"/download"}}');var i=s(4848),r=s(8453);const c={title:"Docker",metaTitle:"Docker",description:"Run Ampache with docker"},l=void 0,o={},t=[{value:"NEWS",id:"news",level:2},{value:"GitHub Project",id:"github-project",level:2},{value:"How to use this image",id:"how-to-use-this-image",level:2},{value:"docker run",id:"docker-run",level:3},{value:"docker-compose",id:"docker-compose",level:3},{value:"Environment variables",id:"environment-variables",level:3},{value:"Automated install",id:"automated-install",level:4},{value:"Enable debug logging",id:"enable-debug-logging",level:3},{value:"Permissions",id:"permissions",level:3},{value:"Image Variants",id:"image-variants",level:2},{value:"<code>ampache:&lt;version&gt;</code>",id:"ampacheversion",level:3},{value:"<code>ampache:latest</code>",id:"ampachelatest",level:3},{value:"<code>ampache:develop</code>",id:"ampachedevelop",level:3},{value:"<code>ampache:nosql</code>",id:"ampachenosql",level:3},{value:"<code>ampache:nosql&lt;version&gt;</code>",id:"ampachenosqlversion",level:3},{value:"<code>ampache:client</code>",id:"ampacheclient",level:3},{value:"<code>ampache:client-nosql</code>",id:"ampacheclient-nosql",level:3},{value:"Running on ARM",id:"running-on-arm",level:2},{value:"Installation",id:"installation",level:2},{value:"Set the local_web_path",id:"set-the-local_web_path",level:2},{value:"Themes",id:"themes",level:2},{value:"Thanks to",id:"thanks-to",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.RP)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{class:"article",children:(0,i.jsx)("p",{class:"article-p text--center",children:(0,i.jsx)(n.p,{children:"Docker image for Ampache, a web based audio/video streaming application and file manager allowing you to access your music & videos from anywhere, using almost any internet enabled device."})})}),"\n",(0,i.jsx)(n.h2,{id:"news",children:"NEWS"}),"\n",(0,i.jsx)(n.p,{children:"Debian has released a new stable version and containers are updated to match."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Trixie uses PHP 8.4 and MariaDB has been updated to the latest LTS version."}),"\n",(0,i.jsxs)(n.li,{children:["The UID and GID of mysql has changed and this ",(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache-docker/commit/1020db4855d641b938560b90c513aa667c6f5df2",children:"commit"})," checks that your ID's match the container ID's."]}),"\n",(0,i.jsxs)(n.li,{children:["The included ",(0,i.jsx)(n.code,{children:"php.ini"})," file has been updated so you may need to update yours depending on your changes."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For the Debian upgrade to Bookworm MariaDB upgrades caused one issue."}),"\n",(0,i.jsxs)(n.p,{children:["Have a look at ",(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache-docker/issues/102#issuecomment-1640956439",children:"comment"})," for information about how it was solved when there was an error during the upgrade."]}),"\n",(0,i.jsx)(n.h2,{id:"github-project",children:"GitHub Project"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache-docker",children:"github.com"})}),"\n",(0,i.jsx)(n.h2,{id:"how-to-use-this-image",children:"How to use this image"}),"\n",(0,i.jsxs)(n.p,{children:["This section covers two methods for running Ampache, first with the ",(0,i.jsx)(n.code,{children:"docker run"})," command, and then using ",(0,i.jsx)(n.code,{children:"docker-compose"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"docker-run",children:"docker run"}),"\n",(0,i.jsx)(n.p,{children:"To run the current Ampache master (stable) branch:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker run --name=ampache -d -v /path/to/your/music:/media:ro -p 80:80 ampache/ampache\n"})}),"\n",(0,i.jsx)(n.h3,{id:"docker-compose",children:"docker-compose"}),"\n",(0,i.jsx)(n.p,{children:"This method is recommended as it creates persistent volumes for important data and makes restarting the container much easier."}),"\n",(0,i.jsxs)(n.p,{children:["If you're already using Docker Desktop for Windows or Mac then Docker Compose is included. If you are using a different version or on Linux, follow these instructions in the docker docs: ",(0,i.jsx)(n.a,{href:"https://docs.docker.com/compose/install/",children:"Install Docker Compose"})]}),"\n",(0,i.jsxs)(n.p,{children:["In the ",(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache-docker/blob/master/docker-compose.yml",children:"GitHub repository"})," is a simple ",(0,i.jsx)(n.code,{children:"docker-compose.yml"})," file to get started. Download the file and run this command to start an Ampache container:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker-compose up -d\n"})}),"\n",(0,i.jsx)(n.p,{children:"This automatically creates the following bind mounts:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./data/media"})," mounted at ",(0,i.jsx)(n.code,{children:"/media"})," for music"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./data/mysql"})," mounted at ",(0,i.jsx)(n.code,{children:"/var/lib/mysql"})," for persistent MySQL storage"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./data/config"})," mounted at ",(0,i.jsx)(n.code,{children:"/var/www/config"})," for persistent Ampache configuration"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"./data/log"})," mounted at ",(0,i.jsx)(n.code,{children:"/var/log/ampache"})," for debug logs"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"environment-variables",children:"Environment variables"}),"\n",(0,i.jsxs)(n.p,{children:["You can configure parts of the container using environment variables. When running with ",(0,i.jsx)(n.code,{children:"docker run"}),", you can set an environment variable using the ",(0,i.jsx)(n.code,{children:"-e"})," parameter; for example, ",(0,i.jsx)(n.code,{children:"-e FOO=BAR"})," sets the environemnt variable ",(0,i.jsx)(n.code,{children:"FOO"})," to bar. When using ",(0,i.jsx)(n.code,{children:"docker-compose"}),", you can set environment variables using a ",(0,i.jsx)(n.code,{children:".env"})," file in this directory."]}),"\n",(0,i.jsx)(n.p,{children:"Available environment variables are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"VERSION"}),": Ampache version to build using GitHub release ",(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache/tags",children:"tags"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MYSQL_USER"}),": Set your own MySql admin username (Default: admin)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"MYSQL_PASS"}),": Set your own MySql admin password (Or one will be randomly generated for you)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"DISABLE_INOTIFYWAIT_CLEAN"}),": If set to 1, disables the clean step on the directory monitor. This prevents Ampache from automatically cleaning files. If you are using a bind mount on an external storage, this may be desirable as it prevents Ampache from removing files if the external storage goes down."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"LOG_FILE"}),": Full file path to ampache log file inside the container. (Default: /var/log/ampache/ampache.log) When available it will print log file data to the docker logs command. (e.g. ",(0,i.jsx)(n.code,{children:"docker logs ampache"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"automated-install",children:"Automated install"}),"\n",(0,i.jsx)(n.p,{children:"When you install Ampache you can use the CLI to do it without using the web interface."}),"\n",(0,i.jsx)(n.p,{children:"The following variables can be used to automatically install the server."}),"\n",(0,i.jsxs)(n.p,{children:["An install will only run when there is no existing config file (",(0,i.jsx)(n.code,{children:"/var/www/config/ampache.cfg.php"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DB_NAME"})," Desired Database Name ",(0,i.jsx)(n.strong,{children:"REQUIRED"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DB_HOST"})," Hostname of your database ",(0,i.jsx)(n.strong,{children:"REQUIRED"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DB_USER"})," MySQL Administrative Username (Fallback to ",(0,i.jsx)(n.code,{children:"MYSQL_USER"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DB_PASSWORD"})," MySQL Administrative Password (Fallback to ",(0,i.jsx)(n.code,{children:"MYSQL_PASS"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"DB_PORT"})," MySQL Port"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"FORCE_INSTALL"})," If 1 then forcibly replace any existing database"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AMPACHE_DB_USER"})," Ampache Database Username (Fallback to ",(0,i.jsx)(n.code,{children:"DB_USER"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AMPACHE_DB_PASSWORD"})," Ampache Database Password (Fallback to ",(0,i.jsx)(n.code,{children:"DB_PASSWORD"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AMPACHE_ADMIN_USER"})," Admin username ",(0,i.jsx)(n.strong,{children:"REQUIRED"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AMPACHE_ADMIN_EMAIL"})," Admin email address ",(0,i.jsx)(n.strong,{children:"REQUIRED"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"AMPACHE_ADMIN_PASSWORD"})," Admin password (A random password will be generated without)"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Random passwords can be assigned by using ",(0,i.jsx)(n.code,{children:"**Random**"})," for the following variables"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"MYSQL_PASS"}),"\n",(0,i.jsx)(n.li,{children:"DB_PASSWORD"}),"\n",(0,i.jsx)(n.li,{children:"AMPACHE_DB_PASSWORD"}),"\n",(0,i.jsx)(n.li,{children:"AMPACHE_ADMIN_PASSWORD"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For the ",(0,i.jsx)(n.a,{href:"#ampacheclient",children:"Ampache client"})," image type there are two additional variables."]}),"\n",(0,i.jsxs)(n.p,{children:["To use a custom interface the files must exist in the container. (Either copied from ",(0,i.jsx)(n.code,{children:"/data/client"})," to ",(0,i.jsx)(n.code,{children:"/var/tmp/client"})," during image build or by using a volume mounted to ",(0,i.jsx)(n.code,{children:"/var/tmp/client"}),")"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CLIENT_ZIP"})," Custom client install zip (Default: ",(0,i.jsx)(n.code,{children:"ample.zip"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"CLIENT_INSTALL"})," Custom client install script (Default: ",(0,i.jsx)(n.code,{children:"ample.sh"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"EXAMPLE: This will create an Ampache develop container on port 80 with a random password for the admin user."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker run -d --name=ampache-develop \\\n    -e DB_NAME=ampache-develop \\\n    -e MYSQL_USER=admin \\\n    -e MYSQL_PASS=changeme \\\n    -e DB_HOST=localhost \\\n    -e AMPACHE_ADMIN_USER=admin \\\n    -e AMPACHE_ADMIN_EMAIL=admin@example.com \\\n    -p 80:80 \\\n    ampache/ampache:develop\n"})}),"\n",(0,i.jsx)(n.p,{children:"This creates a new container with a local MariaDB and configures an admin account."}),"\n",(0,i.jsx)(n.h3,{id:"enable-debug-logging",children:"Enable debug logging"}),"\n",(0,i.jsx)(n.p,{children:"The Ampache containers do not log anything by default."}),"\n",(0,i.jsx)(n.p,{children:"You can Enable logging using the docker exec commands to sed your config file. These commands will update your config file to enable logging."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'docker exec -it ampache sed -i "s/log_filename = \\"%name.%Y%m%d.log\\"/log_filename = \\"ampache.log\\"/g" /var/www/config/ampache.cfg.php\ndocker exec -it ampache sed -i "s/;debug = \\"true\\"/debug = \\"true\\"/g" /var/www/config/ampache.cfg.php\n'})}),"\n",(0,i.jsx)(n.p,{children:"When enabled make sure there are no visual or permission issues showing up in your browser. If you get a permission error you can set the log folder permissions with these commands."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker exec -it ampache chown www:data:www-data /var/log/ampache\ndocker exec -it ampache chmod 754 /var/log/ampache\n"})}),"\n",(0,i.jsx)(n.p,{children:"Restart the container and logs will start flowing in!"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'2025-08-25 23:55:53,909 INFO success: apache2 entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n2025-08-25 23:55:53,909 INFO success: cron entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n2025-08-25 23:55:53,909 INFO success: inotifywait entered RUNNING state, process has stayed up for > than 1 seconds (startsecs)\n2025-08-25T23:56:08+00:00 [ampache] (Ampache\\Module\\System\\Dba) -> Database connection...\n2025-08-25T23:56:08+00:00 [ampache] (Ampache\\Module\\System\\Dba) -> Database connection...\n2025-08-25T23:56:08+00:00 [user] (Ampache\\Module\\System\\Session) -> f2b64ef63352084c9630aacfe7953677 has been extended to Tue, 26 Aug 2025 00:56:08 +0000 extension length 3600\n2025-08-25T23:56:08+00:00 [user] (Ampache\\Module\\Application\\ApplicationRunner) -> Found handler "Ampache\\Module\\Application\\Index\\ShowAction" for action "show"\n2025-08-25T23:56:08+00:00 [user] (Ampache\\Module\\System\\Session) -> Session created: 6ff7a5ebd8d9c629f3769ce7220c60ac\n'})}),"\n",(0,i.jsx)(n.h3,{id:"permissions",children:"Permissions"}),"\n",(0,i.jsx)(n.p,{children:"In the container the webserver runs as the http user (UID and GID 33). If you created the directories manually, it is important to ensure that the Ampache Configuration, and log directories are readable and writeable by that user."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"chown 33:33 ./data/config -R\nchown 33:33 ./data/log\n"})}),"\n",(0,i.jsx)(n.p,{children:"Optionally, the media directory should be writable as if you wish to allow uploads."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"chgrp 33 ./data/media && chmod g+w ./data/media\n"})}),"\n",(0,i.jsx)(n.h2,{id:"image-variants",children:"Image Variants"}),"\n",(0,i.jsx)(n.p,{children:"For more advanced users a few different image variants are available."}),"\n",(0,i.jsx)(n.h3,{id:"ampacheversion",children:(0,i.jsx)(n.code,{children:"ampache:<version>"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Recommended"}),": Specifies a particular version from the Ampache master (stable) branch. Pinning Ampache to a specific version can prevent issues where you unexpectedly update a major version of Ampache with breaking changes you're not aware of."]}),"\n",(0,i.jsxs)(n.p,{children:["e.g. ",(0,i.jsx)(n.code,{children:"ampache:7"}),", ",(0,i.jsx)(n.code,{children:"ampache:7.7.2"})]}),"\n",(0,i.jsxs)(n.p,{children:["Use something like ",(0,i.jsx)(n.a,{href:"https://crazymax.dev/diun/",children:"Diun"})," to monitor for updates to the image."]}),"\n",(0,i.jsx)(n.h3,{id:"ampachelatest",children:(0,i.jsx)(n.code,{children:"ampache:latest"})}),"\n",(0,i.jsx)(n.p,{children:"Pulls the most recent image from the Master (stable) branch"}),"\n",(0,i.jsx)(n.h3,{id:"ampachedevelop",children:(0,i.jsx)(n.code,{children:"ampache:develop"})}),"\n",(0,i.jsx)(n.p,{children:"Pulls the most recent image from the Develop branch. This is generally safe to run but can break occasionally. Contains the latest features and updates."}),"\n",(0,i.jsx)(n.h3,{id:"ampachenosql",children:(0,i.jsx)(n.code,{children:"ampache:nosql"})}),"\n",(0,i.jsx)(n.p,{children:"For advanced users, this provides an image without a MySQL server built-in. You must provide your own MySQL server."}),"\n",(0,i.jsx)(n.h3,{id:"ampachenosqlversion",children:(0,i.jsx)(n.code,{children:"ampache:nosql<version>"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"nosql"})," image pinned to a specific version."]}),"\n",(0,i.jsxs)(n.p,{children:["e.g. ",(0,i.jsx)(n.code,{children:"ampache:nosql7"}),", ",(0,i.jsx)(n.code,{children:"ampache:nosql7.7.2"})]}),"\n",(0,i.jsx)(n.h3,{id:"ampacheclient",children:(0,i.jsx)(n.code,{children:"ampache:client"})}),"\n",(0,i.jsxs)(n.p,{children:["For advanced users, this provides an image using ",(0,i.jsx)(n.a,{href:"/docs/information/ampache7-client-structure-install-type",children:"Client Structure"}),". This allows you to run your own API client inside the base of the web interface."]}),"\n",(0,i.jsxs)(n.p,{children:["This image uses ",(0,i.jsx)(n.a,{href:"https://github.com/mitchray/ample",children:"Ample"})," by default and can be customized using ",(0,i.jsx)(n.a,{href:"#automated-install",children:"automated install"})," variables."]}),"\n",(0,i.jsx)(n.h3,{id:"ampacheclient-nosql",children:(0,i.jsx)(n.code,{children:"ampache:client-nosql"})}),"\n",(0,i.jsxs)(n.p,{children:["For advanced users, this provides a ",(0,i.jsx)(n.a,{href:"/docs/information/ampache7-client-structure-install-type",children:"Client Structure"})," image without a MySQL server built-in. You must provide your own MySQL server."]}),"\n",(0,i.jsx)(n.h2,{id:"running-on-arm",children:"Running on ARM"}),"\n",(0,i.jsx)(n.p,{children:"The automated builds for the official repo are now built for linux/amd64, linux/arm/v7 and linux/arm64."}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open ",(0,i.jsx)(n.a,{href:"http://localhost/install.php",children:"http://localhost/install.php"})," and click ",(0,i.jsx)(n.strong,{children:"Start Configuration"}),", then ",(0,i.jsx)(n.strong,{children:"Continue"})]}),"\n",(0,i.jsxs)(n.li,{children:["On the ",(0,i.jsx)(n.strong,{children:"Insert Ampache Database"})," page:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MySQL Administrative Username"}),": admin"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"MySQL Administrative Password"}),": (see container output)","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The logs will show a line like: ",(0,i.jsx)(n.code,{children:"mysql -uadmin -pjnzYXLz7cMzq -h<host> -P<port>"}),". The password is everything after ",(0,i.jsx)(n.code,{children:"-p"}),", in this case ",(0,i.jsx)(n.code,{children:"jnzYXLz7cMzq"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.strong,{children:"Create Database User"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ampache Database User Password"}),": Enter anything"]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Insert Database"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Generate Configuration File"})," page:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Create Config"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Create Admin Account"})," page:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Enter anything for ",(0,i.jsx)(n.strong,{children:"Username"})," and ",(0,i.jsx)(n.strong,{children:"Password"})]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Create Account"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Ampache Update"})," page:","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Update Now!"})]}),"\n",(0,i.jsx)(n.li,{children:"Click [Return to main page] to login using previously entered credentials"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["After installation you will need to setup a catalog. Make sure to use ",(0,i.jsx)(n.code,{children:"/media"})," as the path where your media is located."]}),"\n",(0,i.jsx)(n.h2,{id:"set-the-local_web_path",children:"Set the local_web_path"}),"\n",(0,i.jsx)(n.p,{children:"This applies if Ampache is running behind a reverse proxy. The following are typical error messages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"(Ampache\\Module\\Api\\Subsonic_Api) -> Stream error:\n(Ampache\\Module\\Api\\Subsonic_Api) -> Stream error: The requested URL returned error: 404 Not Found\n"})}),"\n",(0,i.jsx)(n.p,{children:"In ampache.cfg.php set local_web_path to localhost."}),"\n",(0,i.jsxs)(n.p,{children:["There are various discussions and issues with more detail on this, see for example: ",(0,i.jsx)(n.a,{href:"https://github.com/ampache/ampache/issues/1639",children:"issue 1639"})]}),"\n",(0,i.jsxs)(n.p,{children:["If you set ",(0,i.jsx)(n.code,{children:"local_web_path"})," and ",(0,i.jsx)(n.code,{children:"force_ssl"})," options in your config that should work. Forcing SSL makes sure that all links are valid for your proxy"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-conf",children:'local_web_path = "http://192.168.1.1:28787" \nforce_ssl = "true"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"themes",children:"Themes"}),"\n",(0,i.jsxs)(n.p,{children:["By default Ampache only ships with one theme built-in located at ",(0,i.jsx)(n.code,{children:"/var/www/public/themes/reborn"}),". We want to avoid mounting the whole ",(0,i.jsx)(n.code,{children:"/themes"})," directory otherwise the reborn theme will not be updated when the Amapche image updates. It's best to make a copy of the existing theme and then we can mount it in the ",(0,i.jsx)(n.code,{children:"/themes"})," directory as a new theme."]}),"\n",(0,i.jsx)(n.p,{children:"Make sure that the container is already running then copy the current theme to a folder on the host:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker run -d --name=ampache ampache/ampache\ndocker cp ampache:/var/www/public/themes/reborn ./data/new-theme\ndocker container stop ampache\n"})}),"\n",(0,i.jsx)(n.p,{children:"Now make modifications to the theme and then start the container again this time mounting the new theme to the container:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"docker run -d --name=ampache -v ./data/new-theme:/var/www/public/themes/new-theme\n"})}),"\n",(0,i.jsx)(n.h2,{id:"thanks-to",children:"Thanks to"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"@ericfrederich for his original work"}),"\n",(0,i.jsx)(n.li,{children:"@velocity303 and @goldy for the other ampache-docker inspiration"}),"\n",(0,i.jsx)(n.li,{children:"@kuzi-moto for bringing the image out of the dark ages"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.RP)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{RP:()=>r,xA:()=>l});var a=s(6540);const i=a.createContext({});function r(e){const n=a.useContext(i);return a.useMemo(()=>"function"==typeof e?e(n):{...n,...e},[n,e])}const c={};function l({components:e,children:n,disableParentContext:s}){let l;return l=s?"function"==typeof e?e({}):e||c:r(e),a.createElement(i.Provider,{value:l},n)}}}]);